{"version":3,"file":"create-config.js","sources":["../src/create-config.js"],"sourcesContent":["import { _utilsInflectorCamelize as camelize } from 'miragejs';\n\nasync function getDefaultExports(modules) {\n  return Promise.all(\n    Object.entries(modules).map(([path, importFn]) =>\n      importFn().then((module) => ({ path, defaultExport: module.default })),\n    ),\n  );\n}\n\nexport function entityName(path) {\n  const filenameWithoutExt = path.split('/').pop().split('.')[0];\n  return camelize(filenameWithoutExt);\n}\n\nexport async function createConfig(mirageImportMap = {}) {\n  return {\n    factories: await importEntities(mirageImportMap.factories),\n    fixtures: await importEntities(mirageImportMap.fixtures),\n    models: await importEntities(mirageImportMap.models),\n    scenarios: await importEntities(mirageImportMap.scenarios),\n    serializers: await importEntities(mirageImportMap.serializers),\n    identityManagers: await importEntities(mirageImportMap.identityManagers),\n  };\n}\n\nasync function importEntities(importMap = {}) {\n  const modules = await getDefaultExports(importMap);\n\n  return modules.reduce((acc, { path, defaultExport }) => {\n    const configName = entityName(path);\n    acc[configName] = defaultExport;\n    return acc;\n  }, {});\n}\n"],"names":["getDefaultExports","modules","Promise","all","Object","entries","map","path","importFn","then","module","defaultExport","default","entityName","filenameWithoutExt","split","pop","camelize","createConfig","mirageImportMap","factories","importEntities","fixtures","models","scenarios","serializers","identityManagers","importMap","reduce","acc","configName"],"mappings":";;AAEA,eAAeA,iBAAiBA,CAACC,OAAO,EAAE;EACxC,OAAOC,OAAO,CAACC,GAAG,CAChBC,MAAM,CAACC,OAAO,CAACJ,OAAO,CAAC,CAACK,GAAG,CAAC,CAAC,CAACC,IAAI,EAAEC,QAAQ,CAAC,KAC3CA,QAAQ,EAAE,CAACC,IAAI,CAAEC,MAAM,KAAM;IAAEH,IAAI;IAAEI,aAAa,EAAED,MAAM,CAACE;GAAS,CAAC,CACvE,CACF,CAAC;AACH;AAEO,SAASC,UAAUA,CAACN,IAAI,EAAE;AAC/B,EAAA,MAAMO,kBAAkB,GAAGP,IAAI,CAACQ,KAAK,CAAC,GAAG,CAAC,CAACC,GAAG,EAAE,CAACD,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC;EAC9D,OAAOE,uBAAQ,CAACH,kBAAkB,CAAC;AACrC;AAEO,eAAeI,YAAYA,CAACC,eAAe,GAAG,EAAE,EAAE;EACvD,OAAO;AACLC,IAAAA,SAAS,EAAE,MAAMC,cAAc,CAACF,eAAe,CAACC,SAAS,CAAC;AAC1DE,IAAAA,QAAQ,EAAE,MAAMD,cAAc,CAACF,eAAe,CAACG,QAAQ,CAAC;AACxDC,IAAAA,MAAM,EAAE,MAAMF,cAAc,CAACF,eAAe,CAACI,MAAM,CAAC;AACpDC,IAAAA,SAAS,EAAE,MAAMH,cAAc,CAACF,eAAe,CAACK,SAAS,CAAC;AAC1DC,IAAAA,WAAW,EAAE,MAAMJ,cAAc,CAACF,eAAe,CAACM,WAAW,CAAC;AAC9DC,IAAAA,gBAAgB,EAAE,MAAML,cAAc,CAACF,eAAe,CAACO,gBAAgB;GACxE;AACH;AAEA,eAAeL,cAAcA,CAACM,SAAS,GAAG,EAAE,EAAE;AAC5C,EAAA,MAAM1B,OAAO,GAAG,MAAMD,iBAAiB,CAAC2B,SAAS,CAAC;AAElD,EAAA,OAAO1B,OAAO,CAAC2B,MAAM,CAAC,CAACC,GAAG,EAAE;IAAEtB,IAAI;AAAEI,IAAAA;AAAc,GAAC,KAAK;AACtD,IAAA,MAAMmB,UAAU,GAAGjB,UAAU,CAACN,IAAI,CAAC;AACnCsB,IAAAA,GAAG,CAACC,UAAU,CAAC,GAAGnB,aAAa;AAC/B,IAAA,OAAOkB,GAAG;GACX,EAAE,EAAE,CAAC;AACR;;;;"}